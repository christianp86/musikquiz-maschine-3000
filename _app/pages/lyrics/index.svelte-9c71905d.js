import{X as le,S as H,i as W,s as X,l as Y,f as N,e as S,k as D,t as O,c as E,a as $,n as j,g as V,d,Y as Z,b as v,E as h,M as A,h as F,R as z,L as M,I as J,W as K,Z as ae,O as re,j as ie,m as oe,_ as ce,o as ue,$ as Q,V as fe,x as pe,u as he,v as _e,a0 as me}from"../../chunks/vendor-97925aa8.js";const de=()=>{const a=le("__svelte__");return{page:{subscribe:a.page.subscribe},navigating:{subscribe:a.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:a.navigating.subscribe}},session:a.session}};function x(a,t,l){const e=a.slice();return e[10]=t[l],e}function ee(a){let t,l=a[0].tracks.items,e=[];for(let r=0;r<l.length;r+=1)e[r]=te(x(a,l,r));return{c(){for(let r=0;r<e.length;r+=1)e[r].c();t=Y()},l(r){for(let i=0;i<e.length;i+=1)e[i].l(r);t=Y()},m(r,i){for(let s=0;s<e.length;s+=1)e[s].m(r,i);N(r,t,i)},p(r,i){if(i&17){l=r[0].tracks.items;let s;for(s=0;s<l.length;s+=1){const f=x(r,l,s);e[s]?e[s].p(f,i):(e[s]=te(f),e[s].c(),e[s].m(t.parentNode,t))}for(;s<e.length;s+=1)e[s].d(1);e.length=l.length}},d(r){z(e,r),r&&d(t)}}}function te(a){let t,l,e,r,i,s,f=a[10].artists[0].name+"",u,o,c=a[10].name+"",I,p,y=a[10].album.name+"",_,m,L,w,C;return{c(){t=S("li"),l=S("div"),e=S("img"),i=D(),s=S("span"),u=O(f),o=O(" - "),I=O(c),p=O(" ("),_=O(y),m=O(")"),L=D(),this.h()},l(P){t=E(P,"LI",{class:!0});var k=$(t);l=E(k,"DIV",{class:!0});var g=$(l);e=E(g,"IMG",{src:!0,alt:!0}),i=j(g),s=E(g,"SPAN",{class:!0});var n=$(s);u=V(n,f),o=V(n," - "),I=V(n,c),p=V(n," ("),_=V(n,y),m=V(n,")"),n.forEach(d),g.forEach(d),L=j(k),k.forEach(d),this.h()},h(){Z(e.src,r=a[10].album.images[2].url)||v(e,"src",r),v(e,"alt","Album cover"),v(s,"class","name svelte-rl876e"),v(l,"class","suggestions svelte-rl876e"),v(t,"class","svelte-rl876e")},m(P,k){N(P,t,k),h(t,l),h(l,e),h(l,i),h(l,s),h(s,u),h(s,o),h(s,I),h(s,p),h(s,_),h(s,m),h(t,L),w||(C=A(t,"click",a[4]),w=!0)},p(P,k){k&1&&!Z(e.src,r=P[10].album.images[2].url)&&v(e,"src",r),k&1&&f!==(f=P[10].artists[0].name+"")&&F(u,f),k&1&&c!==(c=P[10].name+"")&&F(I,c),k&1&&y!==(y=P[10].album.name+"")&&F(_,y)},d(P){P&&d(t),w=!1,C()}}}function ve(a){let t,l,e,r,i,s,f,u=a[0]!==void 0&&ee(a);return{c(){t=S("div"),l=S("div"),e=S("input"),r=D(),i=S("ul"),u&&u.c(),this.h()},l(o){t=E(o,"DIV",{class:!0});var c=$(t);l=E(c,"DIV",{class:!0});var I=$(l);e=E(I,"INPUT",{type:!0,class:!0,placeholder:!0}),I.forEach(d),r=j(c),i=E(c,"UL",{class:!0});var p=$(i);u&&u.l(p),p.forEach(d),c.forEach(d),this.h()},h(){v(e,"type","text"),v(e,"class","search svelte-rl876e"),v(e,"placeholder","Song title"),v(l,"class","input-container svelte-rl876e"),v(i,"class","suggestions svelte-rl876e"),v(t,"class","search-form svelte-rl876e")},m(o,c){N(o,t,c),h(t,l),h(l,e),M(e,a[1]),h(t,r),h(t,i),u&&u.m(i,null),s||(f=[A(e,"input",a[5]),A(e,"change",a[3]),A(e,"input",a[6])],s=!0)},p(o,[c]){c&2&&e.value!==o[1]&&M(e,o[1]),o[0]!==void 0?u?u.p(o,c):(u=ee(o),u.c(),u.m(i,null)):u&&(u.d(1),u=null)},i:J,o:J,d(o){o&&d(t),u&&u.d(),s=!1,K(f)}}}function ge(a,t,l){let e;const r=ae(),{page:i}=de();re(a,i,p=>l(7,e=p));let s,f="";e.host;async function u(){if(console.log(f),f===void 0)return;const p=`/api/song/${f}`,y=await fetch(p);y.ok&&l(0,s=await y.json())}async function o(p){l(1,f=p.target.innerText.substring(0,p.target.innerText.indexOf("(")-1));const y=f.substring(0,f.indexOf("-")).trimEnd(),_=f.substring(f.indexOf("-")+1).trimStart();console.log(`Artist: ${y}, track: ${_}`);const m=new URLSearchParams;m.append("artist",encodeURI(y)),m.append("track",_);const L=`/api/lyrics?${m.toString()}`;console.log(`URL: ${L}`);const w=await fetch(L);if(w.ok){l(0,s=void 0),console.log(w);let C=await w.json();r("lyrics_found",{lyrics:C.text})}}function c(){f=this.value,l(1,f)}return[s,f,i,u,o,c,()=>l(0,s=void 0)]}class be extends H{constructor(t){super();W(this,t,ge,ve,X,{})}}function se(a,t,l){const e=a.slice();return e[11]=t[l],e}function ne(a){let t,l=a[11].name+"",e,r,i=a[11].lang+"",s,f,u;return{c(){t=S("option"),e=O(l),r=O(" - ("),s=O(i),f=O(`)
			`),this.h()},l(o){t=E(o,"OPTION",{});var c=$(t);e=V(c,l),r=V(c," - ("),s=V(c,i),f=V(c,`)
			`),c.forEach(d),this.h()},h(){t.__value=u=a[11].name,t.value=t.__value},m(o,c){N(o,t,c),h(t,e),h(t,r),h(t,s),h(t,f)},p(o,c){c&4&&l!==(l=o[11].name+"")&&F(e,l),c&4&&i!==(i=o[11].lang+"")&&F(s,i),c&4&&u!==(u=o[11].name)&&(t.__value=u,t.value=t.__value)},d(o){o&&d(t)}}}function ye(a){let t,l,e,r,i,s,f,u,o,c,I,p,y,_,m,L,w,C,P;t=new be({}),t.$on("lyrics_found",a[5]);let k=a[2],g=[];for(let n=0;n<k.length;n+=1)g[n]=ne(se(a,k,n));return{c(){ie(t.$$.fragment),l=D(),e=S("h1"),r=O("Speech synthesiser"),i=D(),s=S("p"),f=O(`Enter some text in the input below and press return or the "play" button to hear it. change voices
	using the dropdown menu.`),u=D(),o=S("form"),c=S("input"),I=D(),p=S("select");for(let n=0;n<g.length;n+=1)g[n].c();y=D(),_=S("div"),m=S("button"),L=O("Play"),this.h()},l(n){oe(t.$$.fragment,n),l=j(n),e=E(n,"H1",{class:!0});var U=$(e);r=V(U,"Speech synthesiser"),U.forEach(d),i=j(n),s=E(n,"P",{class:!0});var b=$(s);f=V(b,`Enter some text in the input below and press return or the "play" button to hear it. change voices
	using the dropdown menu.`),b.forEach(d),u=j(n),o=E(n,"FORM",{class:!0});var R=$(o);c=E(R,"INPUT",{type:!0,class:!0}),I=j(R),p=E(R,"SELECT",{class:!0});var q=$(p);for(let T=0;T<g.length;T+=1)g[T].l(q);q.forEach(d),y=j(R),_=E(R,"DIV",{class:!0});var B=$(_);m=E(B,"BUTTON",{id:!0,type:!0,class:!0});var G=$(m);L=V(G,"Play"),G.forEach(d),B.forEach(d),R.forEach(d),this.h()},h(){v(e,"class","svelte-laik1m"),v(s,"class","svelte-laik1m"),v(c,"type","text"),v(c,"class","txt svelte-laik1m"),v(p,"class","svelte-laik1m"),a[0]===void 0&&ce(()=>a[7].call(p)),v(m,"id","play"),v(m,"type","submit"),v(m,"class","svelte-laik1m"),v(_,"class","controls svelte-laik1m"),v(o,"class","svelte-laik1m")},m(n,U){ue(t,n,U),N(n,l,U),N(n,e,U),h(e,r),N(n,i,U),N(n,s,U),h(s,f),N(n,u,U),N(n,o,U),h(o,c),M(c,a[1]),h(o,I),h(o,p);for(let b=0;b<g.length;b+=1)g[b].m(p,null);Q(p,a[0]),h(o,y),h(o,_),h(_,m),h(m,L),w=!0,C||(P=[A(c,"input",a[6]),A(p,"change",a[7]),A(p,"blur",a[4]),A(o,"submit",fe(a[3]))],C=!0)},p(n,[U]){if(U&2&&c.value!==n[1]&&M(c,n[1]),U&4){k=n[2];let b;for(b=0;b<k.length;b+=1){const R=se(n,k,b);g[b]?g[b].p(R,U):(g[b]=ne(R),g[b].c(),g[b].m(p,null))}for(;b<g.length;b+=1)g[b].d(1);g.length=k.length}U&5&&Q(p,n[0])},i(n){w||(pe(t.$$.fragment,n),w=!0)},o(n){he(t.$$.fragment,n),w=!1},d(n){_e(t,n),n&&d(l),n&&d(e),n&&d(i),n&&d(s),n&&d(u),n&&d(o),z(g,n),C=!1,K(P)}}}const Ue=!1;let ke=1,Se=1;function Ee(a,t,l){let e=window.speechSynthesis,r="",i="",s=[];function f(){l(2,s=e.getVoices().sort(function(_,m){const L=_.name.toUpperCase(),w=m.name.toUpperCase();return L<w?-1:L==w?0:1}))}f(),speechSynthesis.onvoiceschanged!==void 0&&(speechSynthesis.onvoiceschanged=f);function u(){if(e.speaking){console.error("speechSynthesis.speaking");return}if(i!==""){var _=new SpeechSynthesisUtterance(i);_.onend=function(m){console.log("SpeechSynthesisUtterance.onend")},_.onerror=function(m){console.error("SpeechSynthesisUtterance.onerror")};for(let m=0;m<s.length;m++)if(s[m].name===r){_.voice=s[m];break}_.pitch=ke,_.rate=Se,e.speak(_)}}function o(){u()}function c(){u()}function I(_){l(1,i=_.detail.lyrics),u()}function p(){i=this.value,l(1,i)}function y(){r=me(this),l(0,r),l(2,s)}return[r,i,s,o,c,I,p,y]}class Ie extends H{constructor(t){super();W(this,t,Ee,ye,X,{})}}export{Ie as default,Ue as ssr};
