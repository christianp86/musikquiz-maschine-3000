import{S as ze,i as Ie,s as we,e as E,k as O,t as w,c as y,n as A,a as N,g as R,d as b,b as g,f as re,E as l,M as Re,h as ue,W as Oe,I as Se,R as Ae,O as le,Z as Ue,j as Y,J as Ve,m as Z,o as K,u as F,w as Be,x as C,v as $,r as Fe}from"../chunks/vendor-97925aa8.js";import{S as Ce,a as Le,Q as Me}from"../chunks/Question-218ba754.js";import{N as Te}from"../chunks/NavButton-0a1552ec.js";import{B as Xe}from"../chunks/Button-3c5f8eb5.js";import{p as je}from"../chunks/player-14437116.js";import{n as He,a as Ge}from"../chunks/inputStore-d3b33970.js";function Pe(e,t,s){const r=e.slice();return r[11]=t[s],r[12]=t,r[13]=s,r}function De(e){let t,s,r,a,c,_,i=e[11].name+"",h,q,v,z;function k(){e[7].call(t,e[12],e[13])}return{c(){t=E("input"),c=O(),_=E("label"),h=w(i),this.h()},l(f){t=y(f,"INPUT",{type:!0,id:!0,name:!0}),c=A(f),_=y(f,"LABEL",{for:!0});var n=N(_);h=R(n,i),n.forEach(b),this.h()},h(){g(t,"type","checkbox"),g(t,"id",s="player-"+e[11].name),g(t,"name",r="player-"+e[11].name),t.__value=a=e[11].name,t.value=t.__value,g(_,"for",q="player-"+e[11].name)},m(f,n){re(f,t,n),t.checked=e[11].correctQuestions[e[3]].correct,re(f,c,n),re(f,_,n),l(_,h),v||(z=[Re(t,"change",k),Re(t,"change",e[5])],v=!0)},p(f,n){e=f,n&16&&s!==(s="player-"+e[11].name)&&g(t,"id",s),n&16&&r!==(r="player-"+e[11].name)&&g(t,"name",r),n&16&&a!==(a=e[11].name)&&(t.__value=a,t.value=t.__value),n&24&&(t.checked=e[11].correctQuestions[e[3]].correct),n&16&&i!==(i=e[11].name+"")&&ue(h,i),n&16&&q!==(q="player-"+e[11].name)&&g(_,"for",q)},d(f){f&&b(t),f&&b(c),f&&b(_),v=!1,Oe(z)}}}function Je(e){let t,s,r,a,c,_,i,h,q,v=e[2].question+"",z,k,f=e[4],n=[];for(let u=0;u<f.length;u+=1)n[u]=De(Pe(e,f,u));return{c(){t=E("div"),s=E("span"),r=w("Runde "),a=w(e[0]),c=w(", Frage "),_=w(e[1]),i=O(),h=E("div"),q=E("h4"),z=w(v),k=O();for(let u=0;u<n.length;u+=1)n[u].c();this.h()},l(u){t=y(u,"DIV",{class:!0});var d=N(t);s=y(d,"SPAN",{class:!0});var o=N(s);r=R(o,"Runde "),a=R(o,e[0]),c=R(o,", Frage "),_=R(o,e[1]),o.forEach(b),i=A(d),h=y(d,"DIV",{class:!0});var Q=N(h);q=y(Q,"H4",{});var S=N(q);z=R(S,v),S.forEach(b),k=A(Q);for(let T=0;T<n.length;T+=1)n[T].l(Q);Q.forEach(b),d.forEach(b),this.h()},h(){g(s,"class","summary-title svelte-1udrczg"),g(h,"class","summary-content svelte-1udrczg"),g(t,"class","container svelte-1udrczg")},m(u,d){re(u,t,d),l(t,s),l(s,r),l(s,a),l(s,c),l(s,_),l(t,i),l(t,h),l(h,q),l(q,z),l(h,k);for(let o=0;o<n.length;o+=1)n[o].m(h,null)},p(u,[d]){if(d&1&&ue(a,u[0]),d&2&&ue(_,u[1]),d&4&&v!==(v=u[2].question+"")&&ue(z,v),d&56){f=u[4];let o;for(o=0;o<f.length;o+=1){const Q=Pe(u,f,o);n[o]?n[o].p(Q,d):(n[o]=De(Q),n[o].c(),n[o].m(h,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=f.length}},i:Se,o:Se,d(u){u&&b(t),Ae(n,u)}}}var ie;(function(e){e[e.Added=1]="Added",e[e.Removed=-1]="Removed"})(ie||(ie={}));function We(e,t,s){let r;le(e,je,n=>s(8,r=n));const a=r;let{round:c=1}=t,{questionNumber:_=1}=t,{question:i}=t,{totalQuestionIndex:h=0}=t,q=0;const v=Ue();function z(n){n.cancelBubble;const u={playerName:n.currentTarget.value,checked:n.currentTarget.checked};s(6,q+=k(u))}function k(n){if(!n.checked){const u=a.find(o=>o.name===n.playerName);if(u===void 0)return;const d=u.correctQuestions.findIndex(o=>o.question===_&&o.round===c);return d===-1?void 0:(u.correctQuestions[d].correct=!1,u.score-=1,ie.Removed)}if(n.checked){const u=a.find(o=>o.name===n.playerName);if(u===void 0)return;const d=u.correctQuestions.findIndex(o=>o.question===_&&o.round===c);return d===-1?void 0:(u.correctQuestions[d].correct=!0,u.score+=1,ie.Added)}}function f(n,u){n[u].correctQuestions[h].correct=this.checked,s(4,a),s(3,h)}return e.$$set=n=>{"round"in n&&s(0,c=n.round),"questionNumber"in n&&s(1,_=n.questionNumber),"question"in n&&s(2,i=n.question),"totalQuestionIndex"in n&&s(3,h=n.totalQuestionIndex)},e.$$.update=()=>{e.$$.dirty&64&&v("message",{numberOfSelectedPlayers:q})},[c,_,i,h,a,z,q,f]}class Ye extends ze{constructor(t){super();Ie(this,t,We,Je,we,{round:0,questionNumber:1,question:2,totalQuestionIndex:3})}}function Ze(e){let t,s;return t=new Xe({props:{buttonText:e[2],disabled:e[3]}}),t.$on("click",e[10]),{c(){Y(t.$$.fragment)},l(r){Z(t.$$.fragment,r)},m(r,a){K(t,r,a),s=!0},p(r,a){const c={};a&4&&(c.buttonText=r[2]),a&8&&(c.disabled=r[3]),t.$set(c)},i(r){s||(C(t.$$.fragment,r),s=!0)},o(r){F(t.$$.fragment,r),s=!1},d(r){$(t,r)}}}function Ke(e){let t,s;return t=new Te({props:{next:!0,buttonText:e[2],link:"result",disabled:e[3]}}),{c(){Y(t.$$.fragment)},l(r){Z(t.$$.fragment,r)},m(r,a){K(t,r,a),s=!0},p(r,a){const c={};a&4&&(c.buttonText=r[2]),a&8&&(c.disabled=r[3]),t.$set(c)},i(r){s||(C(t.$$.fragment,r),s=!0)},o(r){F(t.$$.fragment,r),s=!1},d(r){$(t,r)}}}function $e(e){let t,s,r,a,c,_,i,h,q,v,z,k,f,n,u,d,o,Q,S,T,x,U,oe,ee,V,p,H,G,te,ce,fe,J,B,de,W,me,j,P,ne;c=new Ce({}),h=new Le({props:{stepNumber:4}}),v=new Me({props:{question:xe}}),B=new Ye({props:{round:e[0],question:e[6],questionNumber:e[1],totalQuestionIndex:e[4]}}),B.$on("message",e[11]),W=new Te({props:{backToRounds:!0,link:"/rounds"}});const ve=[Ke,Ze],L=[];function ge(m,I){return m[5]?0:1}return j=ge(e),P=L[j]=ve[j](e),{c(){t=E("style"),s=w(`body {
			background-color: #e76f51;
		}`),r=O(),a=E("div"),Y(c.$$.fragment),_=O(),i=E("div"),Y(h.$$.fragment),q=O(),Y(v.$$.fragment),z=O(),k=E("div"),f=E("div"),n=E("span"),u=w(e[7]),d=E("span"),o=w("Fragen"),Q=O(),S=E("div"),T=E("span"),x=w(e[8]),U=E("span"),oe=w("Runden"),ee=O(),V=E("div"),p=E("span"),H=w("~"),G=w(e[9]),te=E("span"),ce=w("Minuten"),fe=O(),J=E("div"),Y(B.$$.fragment),de=O(),Y(W.$$.fragment),me=O(),P.c(),this.h()},l(m){const I=Ve('[data-svelte="svelte-jv1l9q"]',document.head);t=y(I,"STYLE",{});var M=N(t);s=R(M,`body {
			background-color: #e76f51;
		}`),M.forEach(b),I.forEach(b),r=A(m),a=y(m,"DIV",{class:!0});var X=N(a);Z(c.$$.fragment,X),_=A(X),i=y(X,"DIV",{class:!0});var D=N(i);Z(h.$$.fragment,D),q=A(D),Z(v.$$.fragment,D),z=A(D),k=y(D,"DIV",{class:!0});var se=N(k);f=y(se,"DIV",{});var _e=N(f);n=y(_e,"SPAN",{class:!0});var qe=N(n);u=R(qe,e[7]),qe.forEach(b),d=y(_e,"SPAN",{class:!0});var ke=N(d);o=R(ke,"Fragen"),ke.forEach(b),_e.forEach(b),Q=A(se),S=y(se,"DIV",{class:!0});var he=N(S);T=y(he,"SPAN",{class:!0});var Ee=N(T);x=R(Ee,e[8]),Ee.forEach(b),U=y(he,"SPAN",{class:!0});var ye=N(U);oe=R(ye,"Runden"),ye.forEach(b),he.forEach(b),ee=A(se),V=y(se,"DIV",{class:!0});var pe=N(V);p=y(pe,"SPAN",{class:!0});var be=N(p);H=R(be,"~"),G=R(be,e[9]),be.forEach(b),te=y(pe,"SPAN",{class:!0});var Ne=N(te);ce=R(Ne,"Minuten"),Ne.forEach(b),pe.forEach(b),se.forEach(b),fe=A(D),J=y(D,"DIV",{id:!0,class:!0});var Qe=N(J);Z(B.$$.fragment,Qe),Qe.forEach(b),de=A(D),Z(W.$$.fragment,D),me=A(D),P.l(D),D.forEach(b),X.forEach(b),this.h()},h(){g(n,"class","quiz-summary-number svelte-1jxkwdb"),g(d,"class","quiz-round-container-header svelte-1jxkwdb"),g(T,"class","quiz-summary-number svelte-1jxkwdb"),g(U,"class","quiz-round-container-header svelte-1jxkwdb"),g(S,"class","quiz-color"),g(p,"class","quiz-summary-number svelte-1jxkwdb"),g(te,"class","quiz-round-container-header svelte-1jxkwdb"),g(V,"class","quiz-color"),g(k,"class","quiz-summary svelte-1jxkwdb"),g(J,"id","quizGrid"),g(J,"class","quiz-container svelte-1jxkwdb"),g(i,"class","quiz-color-text svelte-1jxkwdb"),g(a,"class","quiz svelte-1jxkwdb")},m(m,I){l(document.head,t),l(t,s),re(m,r,I),re(m,a,I),K(c,a,null),l(a,_),l(a,i),K(h,i,null),l(i,q),K(v,i,null),l(i,z),l(i,k),l(k,f),l(f,n),l(n,u),l(f,d),l(d,o),l(k,Q),l(k,S),l(S,T),l(T,x),l(S,U),l(U,oe),l(k,ee),l(k,V),l(V,p),l(p,H),l(p,G),l(V,te),l(te,ce),l(i,fe),l(i,J),K(B,J,null),l(i,de),K(W,i,null),l(i,me),L[j].m(i,null),ne=!0},p(m,[I]){(!ne||I&128)&&ue(u,m[7]),(!ne||I&256)&&ue(x,m[8]);const M={};I&1&&(M.round=m[0]),I&64&&(M.question=m[6]),I&2&&(M.questionNumber=m[1]),I&16&&(M.totalQuestionIndex=m[4]),B.$set(M);let X=j;j=ge(m),j===X?L[j].p(m,I):(Fe(),F(L[X],1,1,()=>{L[X]=null}),Be(),P=L[j],P?P.p(m,I):(P=L[j]=ve[j](m),P.c()),C(P,1),P.m(i,null))},i(m){ne||(C(c.$$.fragment,m),C(h.$$.fragment,m),C(v.$$.fragment,m),C(B.$$.fragment,m),C(W.$$.fragment,m),C(P),ne=!0)},o(m){F(c.$$.fragment,m),F(h.$$.fragment,m),F(v.$$.fragment,m),F(B.$$.fragment,m),F(W.$$.fragment,m),F(P),ne=!1},d(m){b(t),m&&b(r),m&&b(a),$(c),$(h),$(v),$(B),$(W),L[j].d()}}}var ae;(function(e){e.NEXT_QUESTION="N\xE4chste Frage",e.NEXT_ROUND="N\xE4chste Runde",e.RESULT="Ergebnis"})(ae||(ae={}));async function lt({page:e,fetch:t,session:s}){console.log(`Query: ${e.query}`);const r=e.query.get("rounds"),a=e.query.get("questions"),c=await t(`/api/quiz/${r}/${a}`);return c.ok?{props:{quiz:await c.json()}}:{status:c.status,error:new Error("Could not load /api")}}const xe="Hier ist dein Musikquiz.",et=2;function tt(e,t,s){let r,a,c,_,i,h;le(e,He,p=>s(7,_=p)),le(e,Ge,p=>s(8,i=p)),le(e,je,p=>s(17,h=p));const q=h;let{quiz:v}=t;const z=0,k=_*et*i;let f="",n=!0,u=1,d=1,o=0,Q=0,S=!1;for(const p of q){p.score=0,p.correctQuestions=[];for(let H=0;H<i;H++)for(let G=0;G<_;G++)p.correctQuestions.push({round:H+1,question:G+1,correct:!1})}function T(p){return p<i?p+1:p}function x(p){return d<_?p+1:1}function U(){return d===_&&u===i}function oe(){if(s(14,o=0),s(4,Q+=1),s(1,d=x(d)),ee(),U()){s(5,S=!0);return}Q>=_&&Q%_==0&&s(0,u=T(u))}function ee(){if(U()){s(2,f=ae.RESULT);return}d===_?s(2,f=ae.NEXT_ROUND):s(2,f=ae.NEXT_QUESTION)}function V(p){s(14,o=p.detail.numberOfSelectedPlayers)}return ee(),e.$$set=p=>{"quiz"in p&&s(12,v=p.quiz)},e.$$.update=()=>{e.$$.dirty&1&&s(15,r=u-1),e.$$.dirty&2&&s(16,a=d-1),e.$$.dirty&102400&&s(6,c=v.rounds[r].questions[a]),e.$$.dirty&16384&&(o>0?s(3,n=!1):s(3,n=!0))},[u,d,f,n,Q,S,c,_,i,k,oe,V,v,z,o,r,a]}class it extends ze{constructor(t){super();Ie(this,t,tt,$e,we,{quiz:12,rounds:13})}get rounds(){return this.$$.ctx[13]}}export{it as default,lt as load};
